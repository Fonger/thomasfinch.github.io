---
layout: default
title: iOS Icon Generator
permalink: /iosicon/
---

<script src='https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js'></script>
<script type='text/javascript'>

var imageWidth = 0, imageHeight = 0;

$(function () {
    $(":file").change(function () {
        if (this.files && this.files[0]) {
            var reader = new FileReader();
            reader.onload = imageIsLoaded;
            reader.readAsDataURL(this.files[0]);
        }
    });
});

function imageIsLoaded(e) {
	//Get image dimensions
    var url = window.url || window.URL;
    var img = new Image();
    img.onload = function() {
        imageWidth = this.width;
        imageHeight = this.height;

        //Set canvas and svg mask to the correct dimensions
        document.getElementById('iconCanvas').width = imageWidth;
        document.getElementById('iconCanvas').height = imageHeight;
        document.getElementById('svg').width = imageWidth;
        document.getElementById('svg').height = imageHeight;

        //Put the image data in the image views
        $('#icon').attr('src', e.target.result);
	    $('#realIcon').attr('src', e.target.result);
	    // $('#icon').css('visibility', 'visible');

	    //Draw image and mask in canvas
	 	var canvas = document.getElementById('iconCanvas');
		var ctx = canvas.getContext('2d');
		ctx.drawImage(document.getElementById('svg'), 0, 0, imageWidth, imageHeight);
		ctx.globalCompositeOperation = 'source-atop';
		ctx.drawImage(document.getElementById('realIcon'), 0, 0);
    };
    img.src = e.target.result;
};

$(function() { 
    $("#downloadButton").click(function() {

    	console.log($('#icon').attr('src'));

    	if ($('#icon').attr('src') === '' || $('#realIcon').attr('src') === '') {
    		alert('Please upload an image.');
    		return;
    	}

    	var canvas = document.getElementById('iconCanvas');
    	var image = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream");
    	console.log(image);
    	window.location.href = image;
    });
});
</script>

<style>
.app-icon {
	background-size: 100% 100%;
	cursor: pointer;
	border-radius: 17.544%;
	-webkit-mask-repeat: no-repeat;
  	-webkit-mask-size: 100% 100%;
  	-webkit-mask-image: url('{{ site.url }}/resources/icongenerator/ios7-icon.svg');
}
</style>

<h1>iOS 7+ Icon Generator</h1>

<p>This tool takes a square app icon and masks it to match the shape of iOS 7+ icons. It's pretty simple, but there apparently aren't good online tools for this ¯\_(ツ)_/¯</p>

<input type='file' />

<br /><br />

<img id='icon' class='app-icon' src='' alt='Icon image' style='max-width:300px; max-height:300px; visibility:hidden;' />

<br /><br />

<img id='realIcon' class='app-icon' src=''/>

<img id='svg' src='{{ site.url }}/resources/icongenerator/ios7-icon.svg' />

<canvas id='iconCanvas' width=2000 height=2000 ></canvas>

<button id='downloadButton'>Download Masked Icon</button>
